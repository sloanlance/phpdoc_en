<?xml version="1.0" encoding="utf-8"?>
<!-- $Revision$ -->

<section xml:id="mongo.installation" xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">
 &reftitle.install;
 <para>
  &pecl.moved;
  &pecl.info;
  <link xlink:href="&url.pecl.package;mongo">&url.pecl.package;mongo</link>.
 </para>

 <section>
  <title>Installing on *NIX</title>
  <subtitle>Unix, Linux, OS X, Cygwin</subtitle>

  <para>
   Run:
   <programlisting>
<![CDATA[

$ sudo pecl install mongo

]]>
    </programlisting>
  </para>

  <para>
   Add the following line to your php.ini file:
   <programlisting>
<![CDATA[
extension=mongo.so
]]>
    </programlisting>
  </para>
 </section>

 <section>
  <title>Manual Installation</title>

  <para>For driver developers and people interested in the latest bugfixes, you 
   can compile the driver from the latest source on 
   <link xlink:href="http://github.com/mongodb/mongo-php-driver">Github</link>.
   Go to Github and click the "download" button.  Then run:

   <programlisting>
<![CDATA[
$ tar zxvf mongodb-mongodb-php-driver-<commit_id>.tar.gz
$ cd mongodb-mongodb-php-driver-<commit_id>
$ phpize
$ ./configure
$ sudo make install
]]>
   </programlisting>
  </para>

  <para>
   Make the following changes to php.ini:
  </para>
  <itemizedlist>
   <listitem>
    <para>
     1. The build will display where it is installing the PHP driver with output that looks something like:
     <programlisting>
<![CDATA[
      Installing '/usr/lib/php/extensions/no-debug-zts-20060613/mongo.so'
]]>
     </programlisting>

      Make sure that it is the same as the PHP extension directory by runnning:

     <programlisting>
<![CDATA[
      $ php -i | grep extension_dir
        extension_dir => /usr/lib/php/extensions/no-debug-zts-20060613 =>
      /usr/lib/php/extensions/no-debug-zts-20060613  
]]>
     </programlisting>

     If it's not, change the extension_dir in php.ini or move mongo.so.
    </para>
   </listitem>
   <listitem>
    <para>
     2. To load the extension on PHP startup, add a line:

     <programlisting>
<![CDATA[
      extension=mongo.so
]]>
     </programlisting>

    </para>
   </listitem>
  </itemizedlist>

  <section>
   <title>OS X</title>

   <para>
    If your system is unable to find autoconf, you'll need to install Xcode 
    (available on your installation DVD).
   </para>
   
   <para>
    Precompiled binaries are available from 
    <link xlink:href="http://www.github.com/mongodb/mongo-php-driver/downloads">Github</link>
    (download the latest one with "osx" in the name that matches your version of 
    PHP).  These for use with MAMP and XAMPP, which come without the headers 
    necessary to compile the extension from scratch.  Extract mongo.so from the 
    archive and add it to MAMP or XAMPP's extension directory.  Add 
    <programlisting>
<![CDATA[
      extension=mongo.so
]]>
    </programlisting>
    to the php.ini file being used and restart the server.
   </para>
  </section>

  <section>
   <title>Gentoo</title>
   <para>On Gentoo using PECL you might get an error that libtool is the wrong 
    version. Compiling from source you'll need to run aclocal and autoconf.
    
    <programlisting>
<![CDATA[
$ phpize && aclocal && autoconf && ./configure && make && make install
]]>
    </programlisting>

    (Thanks to <link xlink:href="http://twitter.com/riklaunim/status/5015388622">@riklaunim</link>)
   </para>
  </section>
 </section>

 <section>
  <title>Installing on Windows</title>

  <para>
   VC8 and VC9 precompiled binaries are available for thread safe and 
   non-thread-safe PHP 5.3 on 
   <link xlink:href="http://github.com/mongodb/mongo-php-driver/downloads">Github</link>.  
   VC6 precompiled binaries are available for thread safe and non-thread-safe 
   PHP 5.2 and 5.3 from <link xlink:href="http://downloads.php.net/pierre/">php.net</link>.
   Unzip the archive and put php_mongo.dll in your PHP extension directory 
   ("ext" by default).
  </para>

  <para>
   The latest (non-release) code is compiled into Windows binaries on every 
   commit.  The zip consists of a .zip with php_mongo.dll and a version.txt.  
   Please keep the version.txt around so that if you have a question or problem,
   you can give the developers the exact version you're using.  (The number is 
   long and nonsensical, but it will make sense to the developers!)
  </para>
  <para>
   To get the latest bug fixes (and possibly bugs), download the binary
   corresponding to the PHP you have installed:
  </para>
  <itemizedlist>
   <listitem>
    <para>
     <link xlink:href="http://downloads.mongodb.org/mongo-latest-php5.3vc8.zip">
      PHP 5.3 VC8 Non-Thread-Safe Mongo extension
     </link>
    </para>
   </listitem>
   <listitem>
    <para>
     <link xlink:href="http://downloads.mongodb.org/mongo-latest-php5.3vc8ts.zip">
      PHP 5.3 VC8 Thread-Safe Mongo extension
     </link>
    </para>
   </listitem>
   <listitem>
    <para>
     <link xlink:href="http://downloads.mongodb.org/mongo-latest-php5.3vc9.zip">
      PHP 5.3 VC9 Non-Thread-Safe Mongo extension
     </link>
    </para>
   </listitem>
   <listitem>
    <para>
     <link xlink:href="http://downloads.mongodb.org/mongo-latest-php5.3vc9ts.zip">
      PHP 5.3 VC9 Thread-Safe Mongo extension
     </link>
    </para>
   </listitem>
  </itemizedlist>

  <para>
   Add the following line to your php.ini file:
   <programlisting>
<![CDATA[
extension=php_mongo.dll
]]>
    </programlisting>
  </para>
 </section>

</section>


<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"~/.phpdoc/manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
